# 第4章 关键的“构建”决策 / Key Construction Decisions

## 4.1 选择编程语言 / Choice of Programming Language

- 使用高级语言的程序员能比使用较低级的语言的程序员达到更好的生产率和质量。另外，高级语言
比低级语言的表达力更强。每行代码能表达更多的含义。

## 4.2 编程约定 / Programming Conventions

- 成功编程的一个关键就在于避免随意地变化，这样你的大脑可以专注于那些真正需要的变化。

## 4.3 你在技术浪潮中的位置 / Your Location on the Technology Wave

- 正如 David Geries所言，编程工具不应该决定你的编程思路。
- “深入一种语言去编程”的程序员首先决定他要表达的思想是什么，然后决定如何使用特定语言提供
的工具来表达这些思想。

## 4.4 选择主要的构建实践方法 / Selection of Major Construction Practices

# 第7章 高质量的子程序 / High-Quality Routines

子程序（routine）是为实现一个特定的目的而编写的一个可被调用的方法（method）或过程（procedure），例如C++中的函数(function)，Java中的方法（method），或Microsoft Visual Basic中的
函数过程（function procedure）或子过程（Sub procedure）。

## 7.1 创建子程序的正当理由 / Valid Reasons to Create a Routine

- 如果没有子程序的抽象能力，我们的智力将根本无法管理复杂的程序。

## 7.2 在子程序层上设计 / Design at the Routine Level

- 内聚性（cohesion）的概念是由 Wayne Stevens, Glenford Myers 和 Larry Constantine在
1974年发表的一篇论文中提出来的。其他一些更为现代的概念，如抽象和封装等，通常在类这一层次
的设计中更为适用，但内聚性的概念仍然存在，而且在单个子程序这一层次上，仍是设计时常用的启
发式方法。
- 功能的内聚性（functional cohesion）是最强也是最好的一种内聚性，也就是说让一个子程序仅
执行一项操作。

## 7.3 好的子程序名字 / Good Routine Names

- 子程序的名字应当描述其所有的输出结果以及副作用。
- 研究表明，变量名的最佳长度是9到15个字符，而子程序名的长短要视该名字是否清晰易懂而定。
- 给过程起名时使用语气强烈的动词加宾语的形式，在面向语言中，你不用在过程名中加入对象的名
词（宾语），因为对象本身已经包含在调用语句中了。

## 7.5 如何使用子程序参数 / How to Use Routine Parameters

- 把子程序的参数个数限制在大约7个以内。心理学研究发现，通常人类很难同时记住超过7个单位的
信息。

## 7.6 使用函数时要特别考虑的问题 / Special Considerations in the Use of Functions

- 函数是指有返回值的子程序；过程是指没有返回值的子程序。在C++中，通常把所有子程序都称为
函数，然而，那些返回值类型为void的函数在语义上其实就是过程。
- 如果一个子程序的主要用途就是返回由其名字所指明的返回值，那么就应该使用函数，否则就应该
使用过程。

## 7.7 宏子程序和内联子程序 / Macro Routines and Inline Routines

- 节制使用inline子程序：
  - inline子程序违反了封装原则，因为C++要求其实现在头文件里，将实现细节暴露给使用者；
  - 会增加整体代码的长度；
  - 为性能原因使用inline需要通过剖测（profile）代码衡量性能上的改进看是否值得。

# 第8章 防御式编程 / Defensive Programming

防御式编程的主要思想是：子程序应该不因传入错误数据而被破坏，哪怕是由其他子程序产生的错
误数据。

## 8.1 保护程序免遭非法输入数据的破坏 / Protecting Your Program from Invalid Inputs

- 用使用迭代设计、编码前先写伪码、写代码前先写测试用例、低层设计检查等活动，都有助于防止
引入错误。

## 8.2 断言 / Assert

- 用错误处理代码来处理预期会发生的状况，用断言来处理绝不应该发生的状况。错误处理通常用来
检查有害的输入数据，而断言是用于检查代码中的bug。

## 8.4 异常 / Exceptions

- 了解所用函数库可能抛出的异常。未能捕获由函数库抛出的异常将会导致程序崩溃，就如同未能捕
获未能由自己代码抛出的异常一样。
- 自始自终考虑各种各样的错误处理机制：在局部处理错误、使用错误码来传递错误、在日志文件中
记录调试信息、关闭系统或其他的一些方式。仅仅因为编程语言提供了异常处理机制而使用异常，是
典型的“为用而用”。

# 第32章 自说明代码 / Self-Documenting Code

## 32.1 外部文档 / External Documentation

- 软件项目的文档涵盖了源码清单内外的各种信息。外部结构文档通常比编码的层次更高，但比问题
定义、需求和架构活动的层次低一些。

## 32.2 编程风格作文档 / Programming Style as Documentation

- 在代码层文档中起主要作用的因素并非注释，而是好的编程风格。编程风格包括良好的程序结构、
直率易懂的方法、有意义的变量名和子程序名、具名常量（而非文字常量）、清晰的布局，以及最低
复杂度的控制流及数据结构。

## 32.3 注释或不注释 / To Comment or Not to Comment

- 我们该提倡加注释，但也不能滥用注释。我们还要审查代码，这样每个人都将了解有益的注释该是
什么样。

## 32.4 高效注释之关键 / Keys to Effective Comments

- 对于完工的代码，只允许有的三种注释类型：代码无法表述的信息、目的性注释和概述性注释。

## 32.5 注释技术 / Commenting Techniques

- 行尾注释虽然在某些情况下有用，但还是会引起若干问题，最好不使用行尾注释。
- 让每个注释都有用。过度注释不是优点——太多的注释只会把其要阐明的代码搞得含混不清。与其写
很多注释，还不如对代码本身的可读性下功夫。

## 32.6 IEEE标准 / IEEE Standards

- 对于源代码层以外的说明，IEEE（电子与电器工程师协会）的软件工程标准是很有价值的信息源。
